set define off verify off feedback off
whenever sqlerror exit sql.sqlcode rollback
--------------------------------------------------------------------------------
--
-- ORACLE Application Express (APEX) export file
--
-- You should run the script connected to SQL*Plus as the Oracle user
-- APEX_050100 or as the owner (parsing schema) of the application.
--
-- NOTE: Calls to apex_application_install override the defaults below.
--
--------------------------------------------------------------------------------
begin
wwv_flow_api.import_begin (
 p_version_yyyy_mm_dd=>'2016.08.24'
,p_release=>'5.1.3.00.05'
,p_default_workspace_id=>1870412561399862
,p_default_application_id=>101
,p_default_owner=>'AKIL_PLUGIN'
);
end;
/
prompt --application/ui_types
begin
null;
end;
/
prompt --application/shared_components/plugins/dynamic_action/highlight_text_based_on_voice_input
begin
wwv_flow_api.create_plugin(
 p_id=>wwv_flow_api.id(5350522662743873)
,p_plugin_type=>'DYNAMIC ACTION'
,p_name=>'HIGHLIGHT.TEXT.BASED.ON.VOICE.INPUT'
,p_display_name=>'Highlight Text Based On Voice Input'
,p_category=>'EXECUTE'
,p_supported_ui_types=>'DESKTOP'
,p_plsql_code=>wwv_flow_string.join(wwv_flow_t_varchar2(
'FUNCTION render (p_dynamic_action IN apex_plugin.t_dynamic_action,',
'                 p_plugin         IN apex_plugin.t_plugin',
'                )',
'RETURN apex_plugin.t_dynamic_action_render_result',
'IS',
'  l_result             apex_plugin.t_dynamic_action_render_result;',
'  l_language           CONSTANT p_dynamic_action.attribute_01%TYPE := p_dynamic_action.attribute_01; --Gets the value of the selected language',
'  l_highlight_color    CONSTANT p_dynamic_action.attribute_02%TYPE := p_dynamic_action.attribute_02; --Gets the value of the selected color ',
'  l_text_storage_item  CONSTANT p_dynamic_action.attribute_03%TYPE := p_dynamic_action.attribute_03; --Gets the item name (to store the voice input text)',
'  l_button_static_id   CONSTANT p_dynamic_action.attribute_04%TYPE := p_dynamic_action.attribute_04; --Gets the Static ID of the record button',
'BEGIN    ',
'    --To add the CSS file            ',
'    apex_css.add_file(p_name  => ''voiceRecognitionButton'',',
'                      p_directory => p_plugin.file_prefix,',
'                      p_version => NULL);',
'',
'    --To add the JavaScript file ',
'    apex_javascript.add_library(p_name        => ''speechToText'',',
'                                p_directory   => p_plugin.file_prefix,',
'                                p_version     => NULL',
'                               );',
'    ',
'    --To set the values of to the corresponding result attributes so the values can be accessed in the JavaScript file.',
'    l_result.attribute_01 := l_language;',
'    l_result.attribute_02 := l_highlight_color;',
'    l_result.attribute_03 := l_text_storage_item;',
'    l_result.attribute_04 := l_button_static_id; ',
'    ',
'    --To execute the JavaScript code and return the result ',
'    l_result.javascript_function := ''voiceRecognition.execute''; ',
'',
'  RETURN l_result;',
'END render;'))
,p_api_version=>2
,p_render_function=>'render'
,p_substitute_attributes=>true
,p_subscribe_plugin_settings=>true
,p_version_identifier=>'1.0'
,p_about_url=>'https://github.com/akilr/Highlight-Text-Based-On-Voice-Input'
,p_files_version=>4
);
wwv_flow_api.create_plugin_attribute(
 p_id=>wwv_flow_api.id(5351637460756860)
,p_plugin_id=>wwv_flow_api.id(5350522662743873)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>1
,p_display_sequence=>10
,p_prompt=>'Language Item'
,p_attribute_type=>'PAGE ITEM'
,p_is_required=>true
,p_supported_ui_types=>'DESKTOP'
,p_is_translatable=>false
,p_help_text=>'Select the Page Item that contains the language.'
);
wwv_flow_api.create_plugin_attribute(
 p_id=>wwv_flow_api.id(5351954317764327)
,p_plugin_id=>wwv_flow_api.id(5350522662743873)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>2
,p_display_sequence=>20
,p_prompt=>'Highlight Color'
,p_attribute_type=>'COLOR'
,p_is_required=>true
,p_default_value=>'#ffff00'
,p_supported_ui_types=>'DESKTOP'
,p_is_translatable=>false
);
wwv_flow_api.create_plugin_attribute(
 p_id=>wwv_flow_api.id(5352231161776556)
,p_plugin_id=>wwv_flow_api.id(5350522662743873)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>3
,p_display_sequence=>30
,p_prompt=>'Voice Input Text Storage Item'
,p_attribute_type=>'PAGE ITEM'
,p_is_required=>true
,p_supported_ui_types=>'DESKTOP'
,p_is_translatable=>false
,p_help_text=>'Select an Item to store the text that has been spoken by the user.'
);
wwv_flow_api.create_plugin_attribute(
 p_id=>wwv_flow_api.id(5352563704789415)
,p_plugin_id=>wwv_flow_api.id(5350522662743873)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>4
,p_display_sequence=>40
,p_prompt=>'Button Static ID'
,p_attribute_type=>'TEXT'
,p_is_required=>true
,p_max_length=>100
,p_is_translatable=>false
,p_help_text=>'Provide the Static ID of the record button in this field.'
);
end;
/
begin
wwv_flow_api.g_varchar2_table := wwv_flow_api.empty_varchar2_table;
wwv_flow_api.g_varchar2_table(1) := '2F2A20486967686C696768742074657874206261736564206F6E2073706565636820696E204F7261636C652041504558202A2F0D0A2F2A20417574686F723A20416B696C2052202A2F0D0A2F2A2056657273696F6E3A20312E30202A2F0D0A2F2A205265';
wwv_flow_api.g_varchar2_table(2) := '666572656E63653A2068747470733A2F2F646576656C6F7065722E6D6F7A696C6C612E6F72672F656E2D55532F646F63732F5765622F4150492F5370656563685265636F676E6974696F6E2A2F0D0A0D0A766172207265636F7264427574746F6E426743';
wwv_flow_api.g_varchar2_table(3) := '6F6C6F722C0D0A202020207265636F7264427574746F6E436F6C6F722C0D0A20202020766F6963655265636F676E6974696F6E203D207B0D0A20202020202020200D0A09092F2F46756E6374696F6E20746F206D616E6970756C61746520746865207072';
wwv_flow_api.g_varchar2_table(4) := '6F7065727469657328636F6C6F722C20656E61626C652F64697361626C6529206F6620746865207265636F726420627574746F6E0D0A09096D616E6970756C617465427574746F6E50726F703A2066756E6374696F6E2870427574746F6E2C7053746174';
wwv_flow_api.g_varchar2_table(5) := '757329207B0D0A090909766172207265636F7264427574746F6E203D2024282223222B70427574746F6E293B200D0A0D0A09090969662870537461747573203D3D202773746172742729207B0D0A09090909766172207265636F7264427574746F6E456C';
wwv_flow_api.g_varchar2_table(6) := '656D203D20646F63756D656E742E676574456C656D656E74427949642870427574746F6E293B200D0A090909097265636F7264427574746F6E4267436F6C6F72203D2077696E646F772E676574436F6D70757465645374796C65287265636F7264427574';
wwv_flow_api.g_varchar2_table(7) := '746F6E456C656D2C206E756C6C292E67657450726F706572747956616C756528226261636B67726F756E642D636F6C6F7222292C0D0A090909202020207265636F7264427574746F6E436F6C6F72203D2077696E646F772E676574436F6D707574656453';
wwv_flow_api.g_varchar2_table(8) := '74796C65287265636F7264427574746F6E456C656D2C206E756C6C292E67657450726F706572747956616C75652822636F6C6F7222293B200D0A09090909090D0A090909097265636F7264427574746F6E2E70726F70282764697361626C6564272C2074';
wwv_flow_api.g_varchar2_table(9) := '727565293B0D0A202020202020202020202020202020207265636F7264427574746F6E2E637373287B22636F6C6F72223A22726762283235352C203235352C2032353529222C226261636B67726F756E642D636F6C6F72223A22726762283235352C2030';
wwv_flow_api.g_varchar2_table(10) := '2C203029227D293B0D0A0909097D0D0A202020202020202020202020656C73652069662870537461747573203D3D202773746F702729207B0D0A202020202020202020202020202020207265636F7264427574746F6E2E70726F70282764697361626C65';
wwv_flow_api.g_varchar2_table(11) := '64272C2066616C7365293B0D0A202020202020202020202020202020207265636F7264427574746F6E2E637373287B22636F6C6F72223A7265636F7264427574746F6E436F6C6F722C226261636B67726F756E642D636F6C6F72223A7265636F72644275';
wwv_flow_api.g_varchar2_table(12) := '74746F6E4267436F6C6F727D293B0D0A0909097D090909090D0A09097D2C09090D0A09090D0A20202020202020202F2F46756E6374696F6E20746F20686967686C6967687420616C6C206F63637572656E636573206F6620746865207465787420746F20';
wwv_flow_api.g_varchar2_table(13) := '73656172636809090D0A2020202020202020736561726368486967686C69676874546578743A2066756E6374696F6E20646F5365617263682870546578742C70436F6C6F7229207B0D0A2020202020202020202020206966202877696E646F772E66696E';
wwv_flow_api.g_varchar2_table(14) := '642026262077696E646F772E67657453656C656374696F6E29207B0D0A20202020202020202020202020202020646F63756D656E742E64657369676E4D6F6465203D20226F6E223B0D0A202020202020202020202020202020207661722073656C203D20';
wwv_flow_api.g_varchar2_table(15) := '77696E646F772E67657453656C656374696F6E28293B0D0A2020202020202020202020202020202073656C2E636F6C6C6170736528646F63756D656E742E626F64792C2030293B0D0A202020202020202020202020202020200D0A202020202020202020';
wwv_flow_api.g_varchar2_table(16) := '202020202020207768696C65202877696E646F772E66696E642870546578742929207B0D0A2020202020202020202020202020202020202020646F63756D656E742E65786563436F6D6D616E64282248696C697465436F6C6F72222C2066616C73652C20';
wwv_flow_api.g_varchar2_table(17) := '70436F6C6F72293B0D0A202020202020202020202020202020202020202073656C2E636F6C6C61707365546F456E6428293B0D0A202020202020202020202020202020207D0D0A20202020202020202020202020202020646F63756D656E742E64657369';
wwv_flow_api.g_varchar2_table(18) := '676E4D6F6465203D20226F6666223B0D0A2020202020202020202020207D0D0A20202020202020207D2C0D0A20202020202020200D0A20202020202020202F2F46756E6374696F6E20746F20696E697469616C697A652074686520686967686C69676874';
wwv_flow_api.g_varchar2_table(19) := '2066756E6374696F6E616C69747909090D0A09092F2F52656D6F766520686967686C6967687420666F72207468652070726576696F7573207365617263680D0A20202020202020202F2F486967686C696768742074686520736561726368656420746578';
wwv_flow_api.g_varchar2_table(20) := '740D0A20202020202020202F2F5365742074686520686967686C6967687465642076616C756520746F207468652041504558206974656D09090D0A2020202020202020696E697469616C697A65486967686C696768743A2066756E6374696F6E28705465';
wwv_flow_api.g_varchar2_table(21) := '78742C70486967686C69676874436F6C6F722C704974656D29207B0D0A09090976617220736561726368546578744974656D56616C203D20617065782E6974656D28704974656D292E67657456616C756528293B0D0A0909090D0A202020202020202020';
wwv_flow_api.g_varchar2_table(22) := '202020766F6963655265636F676E6974696F6E2E736561726368486967686C696768745465787428736561726368546578744974656D56616C2C227472616E73706172656E7422293B0D0A202020202020202020202020766F6963655265636F676E6974';
wwv_flow_api.g_varchar2_table(23) := '696F6E2E736561726368486967686C69676874546578742870546578742C70486967686C69676874436F6C6F72293B0D0A2020202020202020202020200D0A090909617065782E6974656D28704974656D292E73657456616C7565287054657874293B0D';
wwv_flow_api.g_varchar2_table(24) := '0A20202020202020207D2C200D0A09090D0A09092F2F46756E6374696F6E20746F20696E697469616C697A65207468652070726F63657373206F6620636F6E76657274696E6720766F69636520746F20746578742E0D0A09097265636F676E697A65566F';
wwv_flow_api.g_varchar2_table(25) := '696365496E7075743A2066756E6374696F6E28704C616E67756167652C70486967686C69676874436F6C6F722C704974656D2C70427574746F6E29207B0D0A0909092F2F537065656368207265636F676E6974696F6E206F626A6563740D0A0909097661';
wwv_flow_api.g_varchar2_table(26) := '72205370656563685265636F676E6974696F6E203D207765626B69745370656563685265636F676E6974696F6E2C207265636F676E6974696F6E203D206E6577205370656563685265636F676E6974696F6E28292C6C616E6775616765203D2061706578';
wwv_flow_api.g_varchar2_table(27) := '2E6974656D28704C616E6775616765292E67657456616C756528293B0D0A0909090D0A0909097265636F676E6974696F6E2E696E746572696D526573756C7473203D2066616C73653B0D0A2020202020202020202020207265636F676E6974696F6E2E63';
wwv_flow_api.g_varchar2_table(28) := '6F6E74696E756F7573203D2066616C73653B200D0A0909090D0A090909636F6E736F6C652E6C6F67286C616E6775616765293B0D0A0909090D0A0909096966286C616E6775616765297B0D0A202020202020202020202020202020207265636F676E6974';
wwv_flow_api.g_varchar2_table(29) := '696F6E2E6C616E67203D206C616E67756167653B0D0A0909097D0D0A090909656C73657B0D0A090909202020207265636F676E6974696F6E2E6C616E67203D206E6176696761746F722E6C616E67756167653B0D0A2020202020202020202020207D0D0A';
wwv_flow_api.g_varchar2_table(30) := '0D0A2020202020202020202020202F2F546869732072756E73207768656E2074686520737065656368207265636F676E6974696F6E2073657276696365207374617274730D0A2020202020202020202020207265636F676E6974696F6E2E6F6E73746172';
wwv_flow_api.g_varchar2_table(31) := '74203D2066756E6374696F6E2829207B0D0A20202020202020202020202020202020636F6E736F6C652E6C6F672822537065656368207265636F676E6974696F6E20737461727465642E2054727920737065616B696E6720696E746F20746865206D6963';
wwv_flow_api.g_varchar2_table(32) := '726F70686F6E652E22293B0D0A090909090D0A0909090969662870427574746F6E29207B0D0A0909090920202020766F6963655265636F676E6974696F6E2E6D616E6970756C617465427574746F6E50726F702870427574746F6E2C2773746172742729';
wwv_flow_api.g_varchar2_table(33) := '3B0D0A090909097D0D0A2020202020202020202020207D3B0D0A0D0A2020202020202020202020202F2F546869732072756E73207768656E2074686520737065656368207265636F676E6974696F6E207365727669636520686173206572726F720D0A20';
wwv_flow_api.g_varchar2_table(34) := '20202020202020202020207265636F676E6974696F6E2E6F6E6572726F72203D2066756E6374696F6E286576656E7429207B0D0A20202020202020202020202020202020636F6E736F6C652E6C6F6728274572726F72206F6363757272656420696E2072';
wwv_flow_api.g_varchar2_table(35) := '65636F676E6974696F6E3A2027202B206576656E742E6572726F72293B0D0A090909090D0A0909090969662870427574746F6E29207B0D0A2020202020202020202020202020202020202020766F6963655265636F676E6974696F6E2E6D616E6970756C';
wwv_flow_api.g_varchar2_table(36) := '617465427574746F6E50726F702870427574746F6E2C2773746F7027293B0D0A090909097D0D0A2020202020202020202020207D3B0D0A2020202020202020202020202020202020202020202020200D0A2020202020202020202020202F2F5468697320';
wwv_flow_api.g_varchar2_table(37) := '72756E73207768656E2074686520737065656368207265636F676E6974696F6E20736572766963652072657475726E7320726573756C740D0A2020202020202020202020207265636F676E6974696F6E2E6F6E726573756C74203D2066756E6374696F6E';
wwv_flow_api.g_varchar2_table(38) := '286576656E7429207B0D0A2020202020202020202020202020202076617220726573756C74203D206576656E742E726573756C74735B305D5B305D2E7472616E7363726970743B0D0A20202020202020202020202020202020766F6963655265636F676E';
wwv_flow_api.g_varchar2_table(39) := '6974696F6E2E696E697469616C697A65486967686C6967687428726573756C742C70486967686C69676874436F6C6F722C704974656D293B0D0A2020202020202020202020207D3B20202020200D0A2020202020202020202020200D0A20202020202020';
wwv_flow_api.g_varchar2_table(40) := '20202020202F2F546869732072756E73207768656E2074686520737065656368207265636F676E6974696F6E207365727669636520656E64730D0A2020202020202020202020207265636F676E6974696F6E2E6F6E737065656368656E64203D2066756E';
wwv_flow_api.g_varchar2_table(41) := '6374696F6E2829207B0D0A202020202020202020202020202020207265636F676E6974696F6E2E73746F7028293B0D0A090909090D0A0909090969662870427574746F6E29207B0D0A2020202020202020202020202020202020202020766F6963655265';
wwv_flow_api.g_varchar2_table(42) := '636F676E6974696F6E2E6D616E6970756C617465427574746F6E50726F702870427574746F6E2C2773746F7027293B0D0A090909097D0D0A2020202020202020202020207D3B20202020202020202020200D0A202020202020202020202020200D0A2020';
wwv_flow_api.g_varchar2_table(43) := '202020202020202020202F2F5374617274207265636F676E6974696F6E0D0A2020202020202020202020207265636F676E6974696F6E2E737461727428293B200D0A09202020207D2C09090D0A20202020202020200D0A09092F2F46756E6374696F6E20';
wwv_flow_api.g_varchar2_table(44) := '7468617420676574732063616C6C65642066726F6D2074686520706C7567696E0D0A2020202020202020657865637574653A2066756E6374696F6E2829207B0D0A090909766172206C616E677561676520203D20746869732E616374696F6E2E61747472';
wwv_flow_api.g_varchar2_table(45) := '696275746530310D0A09092020202076617220686967686C69676874436F6C6F72203D20746869732E616374696F6E2E61747472696275746530323B0D0A090920202020766172207465787453746F726167654974656D20203D20746869732E61637469';
wwv_flow_api.g_varchar2_table(46) := '6F6E2E61747472696275746530330D0A09092020202076617220627574746F6E4964203D20746869732E616374696F6E2E61747472696275746530343B0D0A0909090D0A090909766F6963655265636F676E6974696F6E2E7265636F676E697A65566F69';
wwv_flow_api.g_varchar2_table(47) := '6365496E707574286C616E67756167652C686967686C69676874436F6C6F722C7465787453746F726167654974656D2C627574746F6E4964293B0909090D0A20202020202020207D0D0A7D3B';
null;
end;
/
begin
wwv_flow_api.create_plugin_file(
 p_id=>wwv_flow_api.id(5350907389747062)
,p_plugin_id=>wwv_flow_api.id(5350522662743873)
,p_file_name=>'speechToText.js'
,p_mime_type=>'text/javascript'
,p_file_charset=>'utf-8'
,p_file_content=>wwv_flow_api.varchar2_to_blob(wwv_flow_api.g_varchar2_table)
);
end;
/
begin
wwv_flow_api.g_varchar2_table := wwv_flow_api.empty_varchar2_table;
wwv_flow_api.g_varchar2_table(1) := '2F2A20486967686C696768742074657874206261736564206F6E2073706565636820696E204F7261636C652041504558202A2F0D0A2F2A20417574686F723A20416B696C2052202A2F0D0A2F2A2056657273696F6E3A20312E30202A2F0D0A0D0A2E6163';
wwv_flow_api.g_varchar2_table(2) := '746976657B0D0A20202020636F6C6F723A20726762283235352C203235352C20323535292021696D706F7274616E743B0D0A202020206261636B67726F756E642D636F6C6F723A20726762283235352C20302C2030292021696D706F7274616E743B0D0A';
wwv_flow_api.g_varchar2_table(3) := '7D0D0A2E696E6163746976657B0D0A20202020636F6C6F723A20726762283235352C203235352C20323535292021696D706F7274616E743B0D0A202020206261636B67726F756E642D636F6C6F723A20233030373664662021696D706F7274616E743B0D';
wwv_flow_api.g_varchar2_table(4) := '0A7D';
null;
end;
/
begin
wwv_flow_api.create_plugin_file(
 p_id=>wwv_flow_api.id(5351223093747065)
,p_plugin_id=>wwv_flow_api.id(5350522662743873)
,p_file_name=>'voiceRecognitionButton.css'
,p_mime_type=>'text/css'
,p_file_charset=>'utf-8'
,p_file_content=>wwv_flow_api.varchar2_to_blob(wwv_flow_api.g_varchar2_table)
);
end;
/
begin
wwv_flow_api.import_end(p_auto_install_sup_obj => nvl(wwv_flow_application_install.get_auto_install_sup_obj, false), p_is_component_import => true);
commit;
end;
/
set verify on feedback on define on
prompt  ...done
